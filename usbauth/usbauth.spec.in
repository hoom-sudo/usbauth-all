# Copyright (c) 2015 SUSE LLC. All Rights Reserved.
# Author: Stefan Koch <skoch@suse.de>
#
# Copyright (c) 2017 Stefan Koch <stefan.koch10@gmail.com>
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of version 2 of the GNU General
# Public License as published by the Free Software Foundation.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, contact SUSE LLC.
#
# To contact SUSE about this file by physical or electronic mail,
# you may find current contact information at www.suse.com

Name: @PACKAGE@
Version: @VERSION@
Release: 1
Group: System/Security
License: GPL-2.0
Summary: USB firewall against BadUSB attacks
Url: https://build.opensuse.org/package/show/home:skoch_suse/usbauth

BuildRoot: %{tmppath}/%{name}-build
Source0: %{name}.tar.bz2
Source1: %{name}-rpmlintrc

Requires: udev
Requires: systemd
BuildRequires: autoconf
BuildRequires: automake
BuildRequires: libusbauth-configparser-devel
BuildRequires: libudev-devel
BuildRequires: dbus-1-devel

%description
It is a firewall against BadUSB attacks. A config file descibes in which way devices would be accepted.

%prep
%setup -n %{name}

%build
autoreconf -f -i
%configure
%make_build

%install
%make_install

%files
%defattr(-,root,root)
%doc COPYING README
/*

%post
%{?udev_rules_update:%udev_rules_update}
if ! getent group usbauth>/dev/null; then groupadd -r usbauth; fi

%postun
%{?udev_rules_update:%udev_rules_update}
groupdel usbauth

%changelog
* Wed Oct 4 2017 stefan.koch10@gmail.com
- using automake to build
* Tue May 5 2015 skoch@suse.de
- initial created spec file
