# Copyright (c) 2015 SUSE LLC. All Rights Reserved.
# Author: Stefan Koch <skoch@suse.de>
#
# Copyright (c) 2017 Stefan Koch <stefan.koch10@gmail.com>
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of version 2 of the GNU General
# Public License as published by the Free Software Foundation.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, contact SUSE LLC.
#
# To contact SUSE about this file by physical or electronic mail,
# you may find current contact information at www.suse.com

Name: @PACKAGE@
Version: @VERSION@
Release: 1
Group: System/X11/Utilities
License: GPL-2.0
Summary: Notifier for USB Firewall to use with desktop environments
Url: https://build.opensuse.org/package/show/home:skoch_suse/usbauth_notifier

BuildRoot: %{tmppath}/%{name}-build
Source0: %{name}.tar.bz2

Requires: usbauth
BuildRequires: autoconf
BuildRequires: automake
BuildRequires: libusbauth-configparser-devel
BuildRequires: libudev-devel
BuildRequires: dbus-1-devel
BuildRequires: libnotify-devel
BuildRequires: gettext-runtime

%description
A notifier for the usbauth firewall against BadUSB attacks. The user could manually allow or deny USB devices.

%prep
%setup -n %{name}

%build
%configure
%make_build

%install
%make_install
mkdir -p %{buildroot}%_sysconfdir/X11/xinit/xinitrc.d
cp data/90usbauth-notifier %{buildroot}%_sysconfdir/X11/xinit/xinitrc.d

%files
%defattr(-,root,root)
%doc COPYING README
/*

%post
chmod +s %_bindir/usbauth-npriv

%changelog
* Wed Oct 4 2017 stefan.koch10@gmail.com
- using automake for build
* Tue May 5 2015 skoch@suse.de
- initial created spec file
